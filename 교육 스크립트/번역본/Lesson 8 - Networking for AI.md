## **Lesson 8: AI를 위한 네트워킹**

### **강의 개요**

이 단원에서는 **AI 데이터 센터 네트워크**에 대해 다룹니다. AI 워크로드를 지원하기 위한 네트워킹 요구 사항, 이를 충족할 수 있는 네트워킹 기술(InfiniBand 및 Ethernet), 그리고 NVIDIA의 네트워킹 포트폴리오에 대해 자세히 살펴봅니다.

### **학습 목표**

이 단원을 마치면 다음을 수행할 수 있습니다:

- **AI 데이터 센터 네트워크의 기본 개념 설명**: AI 데이터 센터에서 네트워크가 어떤 역할을 하는지 이해합니다.
- **AI 데이터 센터에 필수적인 네트워킹 요구 사항 개요 설명**: AI 워크로드를 지원하기 위해 네트워크가 충족해야 하는 핵심 요소를 식별합니다.
- **AI 데이터 센터에서 사용되는 InfiniBand와 Ethernet 네트워킹 기술의 주요 특징 요약**: 각 기술의 장단점과 적용 사례를 이해합니다.
- **NVIDIA의 네트워킹 포트폴리오 개요 제공**: NVIDIA가 제공하는 네트워킹 솔루션을 파악합니다.

---

### **핵심 내용 분석**

#### **1. AI 데이터 센터 네트워크 개요**

- **네트워크 종류**:

  - **컴퓨트 네트워크**: AI 워크로드의 다양한 특성에 맞게 시스템 병목 현상을 최소화하고 성능을 극대화하도록 설계되었습니다. 하드웨어 고장 시 일부 중복성을 제공하고 비용을 최소화합니다.

  - **스토리지 네트워크**: 공유 스토리지에 대한 고속 액세스를 제공합니다. 고대역폭 요구 사항과 고급 패브릭 관리 기능을 갖추어 스토리지 패브릭에 상당한 이점을 제공합니다.

  - **인밴드 관리 네트워크**: 관리 노드에 대한 연결을 제공합니다. 클러스터 관리 서비스(예: SSH, DNS, 작업 스케줄링), NFS 홈 파일 시스템에 대한 액세스, NGC 레지스트리, 코드 저장소 또는 데이터 소스와 같은 외부 서비스에 사용됩니다.

  - **아웃오브밴드 관리 네트워크**: 서버가 오프라인이거나 인밴드 네트워크에서 도달할 수 없는 경우에도 원격 관리 기능을 제공합니다. 원격 전원 제어, 원격 시리얼 콘솔, 온도 및 전력 센서를 제공합니다. 별도의 네트워크는 관리 트래픽이 다른 클러스터 서비스나 사용자 작업에 간섭하지 않도록 보장합니다.

#### **2. AI 워크로드를 위한 네트워킹 요구 사항**

- **GPU 활용 극대화**: GPU는 데이터를 빠르고 병렬로 처리합니다. GPU 기반 시스템의 효율성을 최대화하려면 GPU 활용률을 높게 유지해야 합니다.

- **고대역폭 전송 필요성**: 대량의 데이터를 처리하기 위해 높은 대역폭 전송이 필요합니다.

- **데이터셋과 모델의 증가**: AI의 발전으로 모델과 관련 데이터셋이 커지고 있으며, 이는 대량의 데이터를 저장하고 컴퓨팅 시스템으로 전달해야 함을 의미합니다.

- **다중 GPU 노드 사용**: 많은 AI 모델이 여러 GPU 노드에서 실행되어야 하며, 이는 GPU 간 데이터 전송을 필요로 합니다.

- **성능 영향 요인**:

  - **네트워크 토폴로지**: 네트워크 구조가 성능에 직접적인 영향을 미칩니다.

  - **대역폭과 지연 시간**: 높은 대역폭과 낮은 지연 시간이 중요합니다.

  - **네트워크 프로토콜**: 사용되는 프로토콜은 데이터 전송 효율성과 신뢰성에 영향을 줍니다.

  - **데이터 전송 기술**: 데이터 이동을 최적화하는 기술은 성능에 중요한 역할을 합니다.

  - **관리 방법**: 네트워크 관리 방법도 성능과 안정성에 영향을 줍니다.

#### **3. AI 데이터 센터에 최적화된 네트워크 vs. 전통적인 네트워크**

- **전통적인 네트워크(클라우드에 최적화)**:

  - **특징**: 스토리지, 제어 트래픽을 처리하며, 레거시 네트워크로서 TCP를 사용합니다.

  - **높은 지터 허용**: 지터가 높은 환경에서도 작동합니다.

  - **애플리케이션**: 독립적으로 실행되는 많은 애플리케이션이 있으며, 상호 의존성이 없습니다.

- **AI에 최적화된 네트워크**:

  - **특징**: GPU 간 연결, 고속 스토리지, RDMA 작업을 위한 손실 없는(Lossless) 네트워크, 낮은 지연 시간.

  - **지터 최소화 필요**: 지터를 피해야 합니다.

  - **애플리케이션**: 노드 간 의존성이 높으며, 패브릭의 가장 느린 요소가 전체 클러스터의 속도를 결정합니다.

- **중요성**: AI 훈련 작업의 시작부터 끝까지의 소요 시간이 네트워크의 성능에 직접적으로 영향을 받습니다.

#### **4. InfiniBand 프로토콜**

- **정의**: 높은 처리량과 낮은 지연 시간을 제공하면서 처리 오버헤드를 최소화하도록 설계된 네트워킹 기술.

- **특징**:

  - **하드웨어부터 애플리케이션 레이어까지 솔루션 제공**.

  - **고속 연결**: 컴퓨팅 시스템과 스토리지 간 고속 연결을 제공합니다.

  - **지능형 오프로딩 기능**: 하드웨어 오프로딩을 통해 CPU 오버헤드를 줄이고 데이터 이동을 가속화합니다.

  - **RDMA(Remote Direct Memory Access)**:

    - **설명**: 원격 시스템의 메모리에 직접 액세스하여 CPU의 개입 없이 데이터를 전송할 수 있습니다.

    - **이점**: OS를 우회하여 가장 빠른 원격 데이터 액세스 제공, 전력 및 냉각 요구 사항 감소, 메시지 전달, 소켓 및 스토리지 프로토콜 지원.

#### **5. Ethernet 프로토콜**

- **역사**: 1979년에 도입되어 1980년대에 IEEE 표준으로 처음 표준화되었습니다.

- **특징**:

  - **LAN(Local Area Network)**에서 네트워크 장치가 데이터를 형식화하고 전송하는 방법을 설명합니다.

  - **진화 능력**: 초기 10Mbps에서 현재 최대 400Gbps까지 성능을 향상시키면서도 이전 버전과의 호환성을 유지합니다.

  - **광범위한 적용**: 홈 네트워크부터 기업 LAN, 데이터 센터 인터커넥트까지 다양한 응용 분야에 적합합니다.

- **InfiniBand와의 비교**:

  - **Ethernet**: 광범위한 응용 분야를 지원하도록 설계되었으며, 각 응용 분야는 고유한 요구 사항과 프로토콜을 지원해야 합니다.

  - **InfiniBand**: 데이터 센터에서 최고의 성능을 제공하는 것에 집중합니다.

- **RoCE(RDMA over Converged Ethernet)**:

  - **정의**: Ethernet 네트워크에서 RDMA를 가능하게 하는 기술.

  - **특징**:

    - **InfiniBand 패킷 헤더를 사용하고 UDP 헤더로 캡슐화**하여 Ethernet 네트워크를 통해 전송됩니다.

    - **이점**: AI, 스토리지, 빅데이터 애플리케이션을 가속화하는 데 중요한 기술로 부상하고 있습니다.

#### **6. GPUDirect RDMA**

- **기능**: 원격 시스템의 NVIDIA GPU 간 직접 통신을 제공합니다.

- **이점**:

  - **CPU 사용률 최소화**: 시스템 메모리를 통한 데이터 버퍼 복사를 최소화합니다.

  - **데이터 전송 효율성 향상**: PCI 트랜잭션과 CPU 사용을 줄이고, 종단 간 지연 시간을 개선합니다.

#### **7. NVIDIA의 네트워킹 포트폴리오**

- **종단 간 솔루션 제공**: InfiniBand와 Ethernet 네트워킹 기술을 지원하는 완전한 솔루션을 제공합니다.

- **주요 제품**:

  - **NVIDIA ConnectX SuperNIC**: AI 워크로드를 위한 고급 하드웨어 오프로딩 및 가속 기능 제공.

  - **NVIDIA BlueField DPU 및 SuperNIC**: 클라우드부터 데이터 센터, 엣지까지 어떤 환경에서도 워크로드를 위한 보안되고 가속화된 인프라 제공.

  - **NVIDIA Spectrum Ethernet 스위치 패밀리**: 다양한 애플리케이션에 걸쳐 업계 최고의 성능, 확장성, 신뢰성을 제공하는 스위치 제품군.

  - **NVIDIA Quantum InfiniBand 스위치 패밀리**: 고정 구성 및 모듈식 스위치로 구성되어 있으며, 데이터 센터 성능을 극대화하기 위한 획기적인 성능 제공.

  - **NVIDIA LinkX 케이블 및 트랜시버**: 다양한 응용 분야를 위한 업계에서 가장 완벽한 인터커넥트 제품 라인 제공.

#### **8. NVIDIA Spectrum-X 스위치**

- **특징**:

  - **Ethernet 기반 AI 클라우드의 성능과 효율성을 향상시키도록 설계된 최초의 인터넷 플랫폼**.

  - **구성 요소**: NVIDIA Spectrum-4 Ethernet 스위치와 NVIDIA BlueField-3 DPU의 조합으로, 네트워크 혼잡과 지연 시간을 최소화하고 대역폭을 개선합니다.

  - **이점**:

    - **AI 워크로드에 대해 1.6배의 효과적인 대역폭 달성**.

    - **멀티 테넌트 환경에서 일관되고 예측 가능한 성능 제공**.

- **기술적 개선**:

  - **RoCE 적응형 라우팅**: 동적 라우팅을 통해 네트워크 혼잡을 피하고 최적의 부하 분산을 제공합니다.

  - **RoCE 혼잡 제어**: 혼잡을 일으키는 포트에서 플로우의 주입률을 제한하여 스위치 버퍼 점유율을 줄이고 지연 시간을 감소시키며 버스트 허용량을 향상시킵니다.

- **요구 사항**: NVIDIA Spectrum-4 스위치와 BlueField-3 DPU가 함께 작동해야 합니다.
